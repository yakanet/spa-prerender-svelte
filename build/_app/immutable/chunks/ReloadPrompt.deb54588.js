import{s as T,n as w,e as S}from"./scheduler.32f487cd.js";import{S as U,i as j,e as x,a as R,f as m,g as h,s as C,h as g,j as E,c as W,E as b,k,x as y,F as L}from"./index.6c161935.js";import{_ as A}from"./preload-helper.cf010ec4.js";import{w as N}from"./index.921c05df.js";function q(i={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:t,onRegistered:s,onRegisteredSW:l,onRegisterError:c}=i;let r,u,p;const v=async(d=!0)=>{await u,await(p==null?void 0:p())};async function a(){if("serviceWorker"in navigator){const{Workbox:d}=await A(()=>import("./workbox-window.prod.es5.a7b12eab.js"),[]);r=new d("/sw.js",{scope:"/",type:"classic"}),p=async()=>{await(r==null?void 0:r.messageSkipWaiting())};{let o=!1;const f=()=>{o=!0,r==null||r.addEventListener("controlling",_=>{_.isUpdate&&window.location.reload()}),n==null||n()};r.addEventListener("installed",_=>{typeof _.isUpdate>"u"?typeof _.isExternal<"u"?_.isExternal?f():!o&&(t==null||t()):_.isExternal?window.location.reload():!o&&(t==null||t()):_.isUpdate||t==null||t()}),r.addEventListener("waiting",f),r.addEventListener("externalwaiting",f)}r.register({immediate:e}).then(o=>{l?l("/sw.js",o):s==null||s(o)}).catch(o=>{c==null||c(o)})}}return u=a(),v}function D(i={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:t,onRegistered:s,onRegisteredSW:l,onRegisterError:c}=i,r=N(!1),u=N(!1),p=q({immediate:e,onOfflineReady(){u.set(!0),t==null||t()},onNeedRefresh(){r.set(!0),n==null||n()},onRegistered:s,onRegisteredSW:l,onRegisterError:c});return{needRefresh:r,offlineReady:u,updateServiceWorker:p}}function P(i){let e,n,t,s,l,c="Close",r,u;function p(o,f){return o[1]?V:I}let v=p(i),a=v(i),d=i[0]&&O(i);return{c(){e=h("div"),n=h("div"),a.c(),t=C(),d&&d.c(),s=C(),l=h("button"),l.textContent=c,this.h()},l(o){e=g(o,"DIV",{class:!0,role:!0});var f=E(e);n=g(f,"DIV",{class:!0});var _=E(n);a.l(_),_.forEach(m),t=W(f),d&&d.l(f),s=W(f),l=g(f,"BUTTON",{class:!0,"data-svelte-h":!0}),b(l)!=="svelte-1ff2ewa"&&(l.textContent=c),f.forEach(m),this.h()},h(){k(n,"class","message svelte-1fyhokx"),k(l,"class","svelte-1fyhokx"),k(e,"class","pwa-toast svelte-1fyhokx"),k(e,"role","alert")},m(o,f){R(o,e,f),y(e,n),a.m(n,null),y(e,t),d&&d.m(e,null),y(e,s),y(e,l),r||(u=L(l,"click",i[6]),r=!0)},p(o,f){v!==(v=p(o))&&(a.d(1),a=v(o),a&&(a.c(),a.m(n,null))),o[0]?d?d.p(o,f):(d=O(o),d.c(),d.m(e,s)):d&&(d.d(1),d=null)},d(o){o&&m(e),a.d(),d&&d.d(),r=!1,u()}}}function I(i){let e,n="New content available, click on reload button to update.";return{c(){e=h("span"),e.textContent=n},l(t){e=g(t,"SPAN",{"data-svelte-h":!0}),b(e)!=="svelte-1f14aq8"&&(e.textContent=n)},m(t,s){R(t,e,s)},d(t){t&&m(e)}}}function V(i){let e,n="App ready to work offline";return{c(){e=h("span"),e.textContent=n},l(t){e=g(t,"SPAN",{"data-svelte-h":!0}),b(e)!=="svelte-1uzusaj"&&(e.textContent=n)},m(t,s){R(t,e,s)},d(t){t&&m(e)}}}function O(i){let e,n="Reload",t,s;return{c(){e=h("button"),e.textContent=n,this.h()},l(l){e=g(l,"BUTTON",{class:!0,"data-svelte-h":!0}),b(e)!=="svelte-8ag32q"&&(e.textContent=n),this.h()},h(){k(e,"class","svelte-1fyhokx")},m(l,c){R(l,e,c),t||(s=L(e,"click",i[7]),t=!0)},p:w,d(l){l&&m(e),t=!1,s()}}}function B(i){let e,n=i[2]&&P(i);return{c(){n&&n.c(),e=x()},l(t){n&&n.l(t),e=x()},m(t,s){n&&n.m(t,s),R(t,e,s)},p(t,[s]){t[2]?n?n.p(t,s):(n=P(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:w,o:w,d(t){t&&m(e),n&&n.d(t)}}}function z(i,e,n){let t,s,l;const{needRefresh:c,updateServiceWorker:r,offlineReady:u}=D({onRegistered(a){console.log(`SW Registered: ${a}`)},onRegisterError(a){console.log("SW registration error",a)}});S(i,c,a=>n(0,s=a)),S(i,u,a=>n(1,l=a));const p=()=>{u.set(!1),c.set(!1)},v=()=>r(!0);return i.$$.update=()=>{i.$$.dirty&3&&n(2,t=l||s)},[s,l,t,c,r,u,p,v]}class J extends U{constructor(e){super(),j(this,e,z,B,T,{})}}export{J as default};
//# sourceMappingURL=ReloadPrompt.deb54588.js.map
