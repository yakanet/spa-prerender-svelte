{"version":3,"file":"i18n-svelte.1114794f.js","sources":["../../../../../../node_modules/.pnpm/typesafe-i18n@5.26.1_typescript@5.1.6/node_modules/typesafe-i18n/svelte/index.mjs","../../../../../../src/i18n/i18n-svelte.ts"],"sourcesContent":["// src/index.mts\nimport { writable } from \"svelte/store\";\n\n// ../runtime/src/core-utils.mts\nvar getFallbackProxy = () => (\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  new Proxy(Object.assign(() => \"\", {}), {\n    get: (_target, key) => key === \"length\" ? 0 : getFallbackProxy()\n  })\n);\n\n// ../parser/src/basic.mts\nvar removeEmptyValues = (object) => Object.fromEntries(\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  Object.entries(object).map(([key, value]) => key !== \"i\" && value && value != \"0\" && [key, value]).filter(Boolean)\n);\nvar trimAllValues = (part) => Object.fromEntries(\n  Object.keys(part).map((key) => {\n    const val = part[key];\n    return [\n      key,\n      Array.isArray(val) ? val.map((v) => v?.trim()) : val === !!val ? val : val?.trim()\n    ];\n  })\n);\nvar parseArgumentPart = (text) => {\n  const [keyPart = \"\", ...formatterKeys] = text.split(\"|\");\n  const [keyWithoutType = \"\", type] = keyPart.split(\":\");\n  const [key, isOptional] = keyWithoutType.split(\"?\");\n  return { k: key, i: type, n: isOptional === \"\", f: formatterKeys };\n};\nvar isBasicPluralPart = (part) => !!(part.o || part.r);\nvar parsePluralPart = (content, lastAccessor) => {\n  let [key, values] = content.split(\":\");\n  if (!values) {\n    values = key;\n    key = lastAccessor;\n  }\n  const entries = values.split(\"|\");\n  const [zero, one, two, few, many, rest] = entries;\n  const nrOfEntries = entries.filter((entry) => entry !== void 0).length;\n  if (nrOfEntries === 1) {\n    return { k: key, r: zero };\n  }\n  if (nrOfEntries === 2) {\n    return { k: key, o: zero, r: one };\n  }\n  if (nrOfEntries === 3) {\n    return { k: key, z: zero, o: one, r: two };\n  }\n  return { k: key, z: zero, o: one, t: two, f: few, m: many, r: rest };\n};\nvar REGEX_SWITCH_CASE = /^\\{.*\\}$/;\nvar parseCases = (text) => Object.fromEntries(\n  removeOuterBrackets(text).split(\",\").map((part) => part.split(\":\")).reduce(\n    (accumulator, entry) => {\n      if (entry.length === 2) {\n        return [...accumulator, entry.map((entry2) => entry2.trim())];\n      }\n      ;\n      accumulator[accumulator.length - 1][1] += \",\" + entry[0];\n      return accumulator;\n    },\n    []\n  )\n);\nvar REGEX_BRACKETS_SPLIT = /(\\{(?:[^{}]+|\\{(?:[^{}]+)*\\})*\\})/g;\nvar removeOuterBrackets = (text) => text.substring(1, text.length - 1);\nvar parseRawText = (rawText, optimize = true, firstKey = \"\", lastKey = \"\") => rawText.split(REGEX_BRACKETS_SPLIT).map((part) => {\n  if (!part.match(REGEX_BRACKETS_SPLIT)) {\n    return part;\n  }\n  const content = removeOuterBrackets(part);\n  if (content.startsWith(\"{\")) {\n    return parsePluralPart(removeOuterBrackets(content), lastKey);\n  }\n  const parsedPart = parseArgumentPart(content);\n  lastKey = parsedPart.k || lastKey;\n  !firstKey && (firstKey = lastKey);\n  return parsedPart;\n}).map((part) => {\n  if (typeof part === \"string\")\n    return part;\n  if (!part.k)\n    part.k = firstKey || \"0\";\n  const trimmed = trimAllValues(part);\n  return optimize ? removeEmptyValues(trimmed) : trimmed;\n});\n\n// ../runtime/src/core.mts\nvar applyFormatters = (formatters, formatterKeys, initialValue) => formatterKeys.reduce(\n  (value, formatterKey) => (formatterKey.match(REGEX_SWITCH_CASE) ? ((cases) => cases[value] ?? cases[\"*\"])(parseCases(formatterKey)) : formatters[formatterKey]?.(value)) ?? value,\n  initialValue\n);\nvar getPlural = (pluralRules, { z, o, t, f, m, r }, value) => {\n  switch (z && value == 0 ? \"zero\" : pluralRules.select(value)) {\n    case \"zero\":\n      return z;\n    case \"one\":\n      return o;\n    case \"two\":\n      return t;\n    case \"few\":\n      return f ?? r;\n    case \"many\":\n      return m ?? r;\n    default:\n      return r;\n  }\n};\nvar REGEX_PLURAL_VALUE_INJECTION = /\\?\\?/g;\nvar applyArguments = (textParts, pluralRules, formatters, args) => textParts.map((part) => {\n  if (typeof part === \"string\") {\n    return part;\n  }\n  const { k: key = \"0\", f: formatterKeys = [] } = part;\n  const value = args[key];\n  if (isBasicPluralPart(part)) {\n    return ((typeof value === \"boolean\" ? value ? part.o : part.r : getPlural(pluralRules, part, value)) || \"\").replace(REGEX_PLURAL_VALUE_INJECTION, value);\n  }\n  const formattedValue = formatterKeys.length ? applyFormatters(formatters, formatterKeys, value) : value;\n  return (\"\" + (formattedValue ?? \"\")).trim();\n}).join(\"\");\nvar translate = (textParts, pluralRules, formatters, args) => {\n  const firstArg = args[0];\n  const isObject = firstArg && typeof firstArg === \"object\" && firstArg.constructor === Object;\n  const transformedArgs = args.length === 1 && isObject ? firstArg : args;\n  return applyArguments(textParts, pluralRules, formatters, transformedArgs);\n};\n\n// ../runtime/src/util.string.mts\nvar getPartsFromString = (cache, text) => cache[text] || (cache[text] = parseRawText(text));\n\n// ../runtime/src/util.object.mts\nvar getTranslateInstance = (locale, formatters) => {\n  const cache = {};\n  const pluralRules = new Intl.PluralRules(locale);\n  return (text, ...args) => translate(getPartsFromString(cache, text), pluralRules, formatters, args);\n};\nfunction i18nObject(locale, translations, formatters = {}) {\n  return createProxy(translations, getTranslateInstance(locale, formatters));\n}\nvar wrap = (proxyObject = {}, translateFn) => typeof proxyObject === \"string\" ? translateFn.bind(null, proxyObject) : Object.assign(\n  Object.defineProperty(() => \"\", \"name\", { writable: true }),\n  proxyObject\n);\nvar createProxy = (proxyObject, translateFn) => new Proxy(wrap(proxyObject, translateFn), {\n  get: (target, key) => {\n    if (key === Symbol.iterator)\n      return [][Symbol.iterator].bind(Object.values(target).map((entry) => wrap(entry, translateFn)));\n    return createProxy(target[key], translateFn);\n  }\n});\n\n// src/index.mts\nvar initI18nSvelte = (translations, formatters = {}) => {\n  const _locale = writable();\n  const _LL = writable(getFallbackProxy());\n  const locale = readonly(_locale);\n  const LL = new Proxy({}, {\n    get: (_target, key) => key === \"subscribe\" ? _LL.subscribe : _LL[key]\n  });\n  const setLocale = (newLocale) => {\n    _locale.set(newLocale);\n    _LL.set(i18nObject(newLocale, translations[newLocale], formatters[newLocale]));\n  };\n  return {\n    locale,\n    LL,\n    setLocale\n  };\n};\nfunction readonly(store) {\n  return {\n    // @ts-ignore\n    subscribe: store.subscribe.bind(store)\n  };\n}\nexport {\n  initI18nSvelte\n};\n","// This file was auto-generated by 'typesafe-i18n'. Any manual changes will be overwritten.\n/* eslint-disable */\n\nimport { initI18nSvelte } from 'typesafe-i18n/svelte'\nimport type { Formatters, Locales, TranslationFunctions, Translations } from './i18n-types'\nimport { loadedFormatters, loadedLocales } from './i18n-util'\n\nconst { locale, LL, setLocale } = initI18nSvelte<Locales, Translations, TranslationFunctions, Formatters>(loadedLocales, loadedFormatters)\n\nexport { locale, LL, setLocale }\n\nexport default LL\n"],"names":["getFallbackProxy","_target","key","removeEmptyValues","object","value","trimAllValues","part","val","v","parseArgumentPart","text","keyPart","formatterKeys","keyWithoutType","type","isOptional","isBasicPluralPart","parsePluralPart","content","lastAccessor","values","entries","zero","one","two","few","many","rest","nrOfEntries","entry","REGEX_SWITCH_CASE","parseCases","removeOuterBrackets","accumulator","entry2","REGEX_BRACKETS_SPLIT","parseRawText","rawText","optimize","firstKey","lastKey","parsedPart","trimmed","applyFormatters","formatters","initialValue","formatterKey","cases","_a","getPlural","pluralRules","z","o","t","f","m","r","REGEX_PLURAL_VALUE_INJECTION","applyArguments","textParts","args","translate","firstArg","isObject","transformedArgs","getPartsFromString","cache","getTranslateInstance","locale","i18nObject","translations","createProxy","wrap","proxyObject","translateFn","target","initI18nSvelte","_locale","writable","_LL","readonly","LL","newLocale","store","setLocale","loadedLocales","loadedFormatters"],"mappings":"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","x_google_ignoreList":[0]}