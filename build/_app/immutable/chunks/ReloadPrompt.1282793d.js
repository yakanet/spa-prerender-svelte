import{s as P,n as k,e as T}from"./scheduler.32f487cd.js";import{S as O,i as U,e as E,a as b,f as R,g,s as S,h,j,E as y,c as W,k as v,x as _,F as L}from"./index.6c161935.js";import{_ as D}from"./preload-helper.cf010ec4.js";import{w as C}from"./index.921c05df.js";function I(a={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:s,onRegistered:n,onRegisteredSW:l,onRegisterError:o}=a;let r,f,u;const i=async(d=!0)=>{await f,await(u==null?void 0:u())};async function c(){if("serviceWorker"in navigator){const{Workbox:d}=await D(()=>import("./workbox-window.prod.es5.a7b12eab.js"),[]);r=new d("/sw.js",{scope:"/",type:"classic"}),u=async()=>{await(r==null?void 0:r.messageSkipWaiting())};{let p=!1;const w=()=>{p=!0,r==null||r.addEventListener("controlling",m=>{m.isUpdate&&window.location.reload()}),t==null||t()};r.addEventListener("installed",m=>{typeof m.isUpdate>"u"?typeof m.isExternal<"u"?m.isExternal?w():!p&&(s==null||s()):m.isExternal?window.location.reload():!p&&(s==null||s()):m.isUpdate||s==null||s()}),r.addEventListener("waiting",w),r.addEventListener("externalwaiting",w)}r.register({immediate:e}).then(p=>{l?l("/sw.js",p):n==null||n(p)}).catch(p=>{o==null||o(p)})}}return f=c(),i}function M(a={}){const{immediate:e=!0,onNeedRefresh:t,onOfflineReady:s,onRegistered:n,onRegisteredSW:l,onRegisterError:o}=a,r=C(!1),f=C(!1),u=I({immediate:e,onOfflineReady(){f.set(!0),s==null||s()},onNeedRefresh(){r.set(!0),t==null||t()},onRegistered:n,onRegisteredSW:l,onRegisterError:o});return{needRefresh:r,offlineReady:f,updateServiceWorker:u}}function x(a){let e,t,s="<span>New content available, click on reload button to update.</span>",n,l,o,r="Close",f,u,i=a[0]&&N(a);return{c(){e=g("div"),t=g("div"),t.innerHTML=s,n=S(),i&&i.c(),l=S(),o=g("button"),o.textContent=r,this.h()},l(c){e=h(c,"DIV",{class:!0,role:!0});var d=j(e);t=h(d,"DIV",{class:!0,"data-svelte-h":!0}),y(t)!=="svelte-1pmaeol"&&(t.innerHTML=s),n=W(d),i&&i.l(d),l=W(d),o=h(d,"BUTTON",{class:!0,"data-svelte-h":!0}),y(o)!=="svelte-1ff2ewa"&&(o.textContent=r),d.forEach(R),this.h()},h(){v(t,"class","message svelte-17i0im4"),v(o,"class","svelte-17i0im4"),v(e,"class","pwa-toast svelte-17i0im4"),v(e,"role","alert")},m(c,d){b(c,e,d),_(e,t),_(e,n),i&&i.m(e,null),_(e,l),_(e,o),f||(u=L(o,"click",a[4]),f=!0)},p(c,d){c[0]?i?i.p(c,d):(i=N(c),i.c(),i.m(e,l)):i&&(i.d(1),i=null)},d(c){c&&R(e),i&&i.d(),f=!1,u()}}}function N(a){let e,t="Reload",s,n;return{c(){e=g("button"),e.textContent=t,this.h()},l(l){e=h(l,"BUTTON",{class:!0,"data-svelte-h":!0}),y(e)!=="svelte-8ag32q"&&(e.textContent=t),this.h()},h(){v(e,"class","svelte-17i0im4")},m(l,o){b(l,e,o),s||(n=L(e,"click",a[5]),s=!0)},p:k,d(l){l&&R(e),s=!1,n()}}}function V(a){let e,t=a[1]&&x(a);return{c(){t&&t.c(),e=E()},l(s){t&&t.l(s),e=E()},m(s,n){t&&t.m(s,n),b(s,e,n)},p(s,[n]){s[1]?t?t.p(s,n):(t=x(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:k,o:k,d(s){s&&R(e),t&&t.d(s)}}}function q(a,e,t){let s,n;const{needRefresh:l,updateServiceWorker:o,offlineReady:r}=M({onRegistered(i){console.log(`SW Registered: ${i}`)},onRegisterError(i){console.log("SW registration error",i)}});T(a,l,i=>t(0,n=i));const f=()=>{r.set(!1),l.set(!1)},u=()=>o(!0);return a.$$.update=()=>{a.$$.dirty&1&&t(1,s=n)},[n,s,l,o,f,u]}class F extends O{constructor(e){super(),U(this,e,q,V,P,{})}}export{F as default};
//# sourceMappingURL=ReloadPrompt.1282793d.js.map
